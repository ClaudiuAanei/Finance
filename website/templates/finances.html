{% extends "base.html" %}

{% block content %}

<div class="container my-5 p-4 rounded-4 shadow-sm bg-body-tertiary" style="border: 1px solid #d3d3d3;">
  <!-- Începutul formularului -->
  <form method="post" action="{{ url_for('views.save_changes') }}">

    <!-- Header cu titlu și buton -->
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h2 class="mb-0">Tranzacțiile mele</h2>
      <button type="submit" class="btn btn-outline-success">Salvează modificările</button>
    </div>

    <!-- Tabel scrollabil -->
    <div class="table-responsive rounded-2" style="max-height: 600px;">
      <table class="table table-striped table-hover mb-0">
        <thead class="table-primary" style="position: sticky; top: 0; z-index: 1;">
          <tr>
              <th> Nr </th>
            <th>Name</th>
            <th>Date</th>
            <th>Description</th>
            <th>Amount</th>
            <th>Currency</th>
            <th>Category</th>
          </tr>
        </thead>
        <tbody>
          {% for row in table %}
          <tr>
            <td>{{ loop.index }}</td>
            <td>{{ row.Name }}</td>
            <td>{{ row.Date }}</td>
            <td>{{ row.Description }}</td>
            <td>{{ row.Amount }}</td>
            <td>{{ row.Currency }}</td>
            <td>
              <select class="form-select form-select-sm" name="category_{{ loop.index }}">
                {% for category in categories %}
                  <option value="{{ category }}" {% if category == row.Category %}selected{% endif %}>
                    {{ category | title }}
                  </option>
                {% endfor %}
              </select>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

  </form>
  <a href="{{ url_for('views.clear_data') }}" class="btn btn-outline-warning mt-2">Clear Categories</a>
</div>
{% endblock %}
